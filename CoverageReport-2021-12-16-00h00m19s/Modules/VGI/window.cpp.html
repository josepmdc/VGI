<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>window.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
#include "window.h"
#include "GLFW/glfw3.h"
#include &lt;glm/glm.hpp&gt;
#include &lt;iostream&gt;

namespace window {
bool firstMouse = true;
float yaw = -90.0f;
float pitch = 0.0f;
float lastX = 800.0f / 2.0;
float lastY = 600.0 / 2.0;

State* state;
Camera* camera;

<span style = "background-color:#dfd">void MouseCallback(GLFWwindow* window, double xpos, double ypos) {
    if (firstMouse) {
        lastX = xpos;
        lastY = ypos;
        firstMouse = false;</span>
    }

<span style = "background-color:#dfd">    float xoffset = xpos - lastX;
    float yoffset = lastY - ypos; // reversed since y-coordinates go from bottom to top
    lastX = xpos;
    lastY = ypos;</span>

<span style = "background-color:#dfd">    float sensitivity = 0.2f; // change this value to your liking
    xoffset *= sensitivity;
    yoffset *= sensitivity;</span>

<span style = "background-color:#dfd">    yaw += xoffset;
    pitch += yoffset;</span>

    // make sure that when pitch is out of bounds, screen doesn't get flipped
<span style = "background-color:#dfd">    if (pitch &gt; 89.0f)
        pitch = 89.0f;
    if (pitch &lt; -89.0f)
        pitch = -89.0f;</span>

    glm::vec3 front;
<span style = "background-color:#dfd">    front.x = cos(glm::radians(yaw)) * cos(glm::radians(pitch));
    front.y = sin(glm::radians(pitch));
    front.z = sin(glm::radians(yaw)) * cos(glm::radians(pitch));</span>
    // cameraFront = glm::normalize(front);
<span style = "background-color:#dfd">    camera-&gt;SetCameraFront(glm::normalize(front));
}</span>

<span style = "background-color:#dfd">void KeyCallback(GLFWwindow* window, int key, int scancode, int action, int mods) {
    state-&gt;Modify(key, action);
}</span>

<span style = "background-color:#dfd">Window InitWindow(State* s, Camera* cam) {</span>
    GLFWwindow* glfwWindow;

<span style = "background-color:#dfd">    state = s;
    camera = cam;</span>

    Window window;
<span style = "background-color:#dfd">    window.glfwWindow = nullptr;</span>

    /* Initialize the library */
<span style = "background-color:#dfd">    if (!glfwInit())</span>
<span style = "background-color:#fdd">        return window;</span>

<span style = "background-color:#dfd">    const GLFWvidmode* mode = glfwGetVideoMode(glfwGetPrimaryMonitor());
    window.ScreenWidth = mode-&gt;width;
    window.ScreenHeight = mode-&gt;height;</span>

<span style = "background-color:#dfd">    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);
    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);
    glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span>

#ifdef __APPLE__
    glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);
#endif

<span style = "background-color:#dfd">    glfwWindow = glfwCreateWindow(window.ScreenWidth, window.ScreenHeight, "OpenGL", NULL, NULL);
    if (!glfwWindow) {</span>
<span style = "background-color:#fdd">        glfwTerminate();
        return window;</span>
    }

<span style = "background-color:#dfd">    glfwMakeContextCurrent(glfwWindow);
    glfwSetKeyCallback(glfwWindow, KeyCallback);</span>

<span style = "background-color:#dfd">    window.glfwWindow = glfwWindow;</span>

<span style = "background-color:#dfd">    return window;
}</span>
}; // namespace window</pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>